{% extends "emp/base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto p-6 space-y-8">

  <!-- Page Heading -->
  <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Admin Dashboard</h2>

  <!-- Dashboard Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <div class="bg-white shadow rounded-lg p-6 text-center hover:shadow-xl transition duration-300">
          <p class="text-gray-500 font-semibold">Total Employees</p>
          <p class="text-3xl font-bold">{{ total_employees }}</p>
      </div>
      <div class="bg-white shadow rounded-lg p-6 text-center hover:shadow-xl transition duration-300">
          <p class="text-gray-500 font-semibold">Total Attendance</p>
          <p class="text-3xl font-bold">{{ total_attendance }}</p>
      </div>
      <div class="bg-white shadow rounded-lg p-6 text-center hover:shadow-xl transition duration-300">
          <p class="text-gray-500 font-semibold">Pending Leaves</p>
          <p class="text-3xl font-bold">{{ pending_leaves }}</p>
      </div>
  </div>

  <!-- All Employees -->
  <div class="bg-white shadow-lg rounded-xl p-6 overflow-x-auto mb-8">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">All Employees</h3>
      <table class="min-w-full table-auto border border-gray-300">
          <thead class="bg-gray-100">
              <tr>
                  <th class="border px-3 py-2 text-left">Name</th>
                  <th class="border px-3 py-2 text-left">Email</th>
                  <th class="border px-3 py-2 text-left">Department</th>
                  <th class="border px-3 py-2 text-left">Salary</th>
                  <th class="border px-3 py-2 text-left">Actions</th>
              </tr>
          </thead>
          <tbody>
              {% for emp in employees_list %}
              <tr class="hover:bg-gray-50">
                  <td class="border px-3 py-2">{{ emp.name }}</td>
                  <td class="border px-3 py-2">{{ emp.email }}</td>
                  <td class="border px-3 py-2">{{ emp.department }}</td>
                  <td class="border px-3 py-2">{{ emp.salary }}</td>
                  <td class="border px-3 py-2 space-x-2">
                      <a href="{% url 'update_employee' emp.id %}" class="text-blue-600 hover:text-blue-800">Update</a>
                      <a href="{% url 'delete_employee' emp.id %}" class="text-red-600 hover:text-red-800">Delete</a>
                  </td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="5" class="text-center py-4 text-gray-500">No employees found</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>

  <!-- Employee Attendance -->
  <div class="bg-white shadow-lg rounded-xl p-6 overflow-x-auto mb-8">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">Employee Attendance</h3>
      <table class="min-w-full table-auto border border-gray-300">
          <thead class="bg-gray-100">
              <tr>
                  <th class="border px-3 py-2">Employee</th>
                  <th class="border px-3 py-2">Date</th>
                  <th class="border px-3 py-2">Check-in</th>
                  <th class="border px-3 py-2">Check-out</th>
                  <th class="border px-3 py-2">Working Hours</th>
                  <th class="border px-3 py-2">Actions</th>
              </tr>
          </thead>
          <tbody>
              {% for att in attendance_list %}
              <tr class="hover:bg-gray-50">
                  <td class="border px-3 py-2">{{ att.employee.name }}</td>
                  <td class="border px-3 py-2">{{ att.date }}</td>
                  <td class="border px-3 py-2">{{ att.check_in }}</td>
                  <td class="border px-3 py-2">{{ att.check_out }}</td>
                  <td class="border px-3 py-2">{{ att.working_hours }} hrs</td>
                  <td class="border px-3 py-2 space-x-2">
                      <a href="{% url 'update_attendance' att.id %}" class="text-blue-600 hover:text-blue-800">Update</a>
                      <a href="{% url 'delete_attendance' att.id %}" class="text-red-600 hover:text-red-800">Delete</a>
                  </td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="6" class="text-center py-4 text-gray-500">No attendance records found</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>

  <!-- All Leaves -->
  <div class="bg-white shadow-lg rounded-xl p-6 overflow-x-auto mb-8">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">All Leaves</h3>
      <table class="min-w-full table-auto border border-gray-300">
          <thead class="bg-gray-100">
              <tr>
                  <th class="border px-3 py-2">Employee</th>
                  <th class="border px-3 py-2">Start Date</th>
                  <th class="border px-3 py-2">End Date</th>
                  <th class="border px-3 py-2">Reason</th>
                  <th class="border px-3 py-2">Status</th>
                  <th class="border px-3 py-2">Actions</th>
              </tr>
          </thead>
          <tbody>
              {% for leave in leaves_list %}
              <tr class="hover:bg-gray-50">
                  <td class="border px-3 py-2">{{ leave.employee.name }}</td>
                  <td class="border px-3 py-2">{{ leave.start_date }}</td>
                  <td class="border px-3 py-2">{{ leave.end_date }}</td>
                  <td class="border px-3 py-2">{{ leave.reason }}</td>
                  <td class="border px-3 py-2">
                      {% if leave.status == "Approved" %}
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Approved</span>
                      {% elif leave.status == "Rejected" %}
                        <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Rejected</span>
                      {% else %}
                        <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium">Pending</span>
                      {% endif %}
                  </td>
                  <td class="border px-3 py-2 space-x-2">
                      <a href="{% url 'update_leave' leave.id %}" class="text-blue-600 hover:text-blue-800">Update</a>
                      <a href="{% url 'delete_leave' leave.id %}" class="text-red-600 hover:text-red-800">Delete</a>
                  </td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="6" class="text-center py-4 text-gray-500">No leave records found</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>

  <!-- Add Employee Button -->
  <div class="text-right">
      <a href="{% url 'add_employee' %}" class="bg-gradient-to-r from-green-500 to-teal-600 hover:from-teal-600 hover:to-green-500 text-white font-semibold px-5 py-2 rounded-xl shadow-lg transition-all duration-300">Add Employee</a>
  </div>

</div>

<!-- FontAwesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}