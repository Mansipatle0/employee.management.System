{% extends "emp/base.html" %}
{% block title %}HR Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto p-6 space-y-8">

  <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">HR Dashboard</h2>

  <!-- Top Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="bg-white shadow-2xl rounded-xl p-6 flex justify-between items-center">
          <div>
              <p class="text-gray-500 font-medium">Total Employees</p>
              <p class="text-3xl font-bold text-gray-800">{{ total_employees|default:"0" }}</p>
          </div>
          <i class="fas fa-users text-4xl text-blue-500"></i>
      </div>
      <div class="bg-white shadow-2xl rounded-xl p-6 flex justify-between items-center">
          <div>
              <p class="text-gray-500 font-medium">Pending Leaves</p>
              <p class="text-3xl font-bold text-gray-800">{{ pending_leaves_count }}</p>
          </div>
          <i class="fas fa-clock text-4xl text-yellow-500"></i>
      </div>
      <div class="bg-white shadow-2xl rounded-xl p-6 flex justify-between items-center">
          <div>
              <p class="text-gray-500 font-medium">Approved Leaves</p>
              <p class="text-3xl font-bold text-gray-800">{{ approved_leaves_count }}</p>
          </div>
          <i class="fas fa-check-circle text-4xl text-green-500"></i>
      </div>
      <div class="bg-white shadow-2xl rounded-xl p-6 flex justify-between items-center">
          <div>
              <p class="text-gray-500 font-medium">Rejected Leaves</p>
              <p class="text-3xl font-bold text-gray-800">{{ rejected_leaves_count }}</p>
          </div>
          <i class="fas fa-times-circle text-4xl text-red-500"></i>
      </div>
  </div>

  <!-- Pending Leaves Table -->
  <div class="bg-white shadow-2xl rounded-xl p-6 overflow-x-auto">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">Pending Leaves</h3>
      <table class="min-w-full table-auto border-collapse border border-gray-300">
          <thead class="bg-gray-100">
              <tr>
                  <th class="border px-3 py-2 text-left">Employee</th>
                  <th class="border px-3 py-2 text-left">Start Date</th>
                  <th class="border px-3 py-2 text-left">End Date</th>
                  <th class="border px-3 py-2 text-left">Reason</th>
                  <th class="border px-3 py-2 text-left">Action</th>
              </tr>
          </thead>
          <tbody>
              {% for leave in pending_leaves %}
              <tr class="hover:bg-gray-50 transition duration-200 ease-in-out">
                  <td class="border px-3 py-2">{{ leave.employee.name }}</td>
                  <td class="border px-3 py-2">{{ leave.start_date }}</td>
                  <td class="border px-3 py-2">{{ leave.end_date }}</td>
                  <td class="border px-3 py-2">{{ leave.reason }}</td>
                  <td class="border px-3 py-2 space-x-2 flex">
                      <a href="{% url 'approve_leave' leave.id %}" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg flex items-center space-x-1">
                          <i class="fas fa-check"></i><span>Approve</span>
                      </a>
                      <a href="{% url 'reject_leave' leave.id %}" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg flex items-center space-x-1">
                          <i class="fas fa-times"></i><span>Reject</span>
                      </a>
                  </td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="5" class="py-4 text-center text-gray-500">No pending leaves</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>

  <!-- Employee Attendance Table -->
  <div class="bg-white shadow-2xl rounded-xl p-6 overflow-x-auto">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">Employee Attendance Summary</h3>
      <table class="min-w-full table-auto border-collapse border border-gray-300">
          <thead class="bg-gray-100">
              <tr>
                  <th class="border px-3 py-2 text-left">Employee</th>
                  <th class="border px-3 py-2 text-left">Date</th>
                  <th class="border px-3 py-2 text-left">Check-in</th>
                  <th class="border px-3 py-2 text-left">Check-out</th>
                  <th class="border px-3 py-2 text-left">Working Hours</th>
              </tr>
          </thead>
          <tbody>
              {% for emp in employees %}
              <tr class="hover:bg-gray-50 transition duration-200 ease-in-out">
                  <td class="border px-3 py-2">{{ emp.employee.name }}</td>
                  <td class="border px-3 py-2">{{ emp.date }}</td>
                  <td class="border px-3 py-2">{{ emp.check_in }}</td>
                  <td class="border px-3 py-2">{{ emp.check_out }}</td>
                  <td class="border px-3 py-2">{{ emp.working_hours }} hrs</td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="5" class="py-4 text-center text-gray-500">No attendance records</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>

</div>

<!-- FontAwesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

{% endblock %}